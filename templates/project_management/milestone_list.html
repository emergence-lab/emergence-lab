{% extends 'project_management/pm_base.html' %}

{% block title %}Milestones{% endblock title %}

{% block pm_content %}

<div class="container-fluid">
  <div class="col-md-12">
    <div>
        <ul class="nav nav-pills">
          <li role="presentation" class="active"><a href="#open" aria-controls="open" data-toggle="pill" role="tab"><span class="glyphicon glyphicon-exclamation-sign"></span> Open</a></li>
          <li role="presentation"><a href="#closed" aria-controls="closed" data-toggle="pill" role="tab"><span class="glyphicon glyphicon-ok-sign"></span> Closed</a></li>
          <li role="presentation"><a href="{% url 'milestone_create' %}"><span class="glyphicon glyphicon-plus"></span> New</a></li>
          <h4 class="pull-right">This page lists milestones you've created for your investigations.</h4>
        </ul>
    </div>
    <div class="spacer-xs"></div>

    <div class="tab-content">
      <div class="tab-pane active" role="tabpanel" id="open">
        <div class="list-group">
          {% for milestone in object_list %}
          {% if milestone.is_active %}
            <a href="{% url 'milestone_detail' pk=milestone.id %}" class="list-group-item">
              <h4 class="list-group-item-heading">
                {{milestone.name}}
                <span class="label label-default">
                  {{milestone.investigation.project}}/{{milestone.investigation}}
                </span>
                <span class="pull-right">Due: {{milestone.due_date}}</span>
              </h4>
              <p class="list-group-item-text">
                {{milestone.processes.all|length}} Progress Updates
                &emsp;&emsp;
                {{milestone.literature.all|length}} Literature Documents
                <br></br>
              </p>
              <p class="list-group-item-text">
                <div class="well">{{milestone.description}}</div>
              </p>
              <p>

              </p>
            </a>
          {% endif %}
          {% endfor %}
        </div>
      </div>
      <div class="tab-pane" role="tabpanel" id="closed">
        <div class="list-group">
          {% for milestone in object_list %}
          {% if not milestone.is_active %}
            <a href="{% url 'milestone_detail' pk=milestone.id %}" class="list-group-item">
              <h4 class="list-group-item-heading">
                {{milestone.name}}
                <span class="label label-default">
                  {{milestone.investigation.project}}/{{milestone.investigation}}
                </span>
                <span class="pull-right">Due: {{milestone.due_date}}</span>
              </h4>
              <p class="list-group-item-text">
                {{milestone.processes.all|length}} Progress Updates
                &emsp;&emsp;
                {{milestone.literature.all|length}} Literature Documents
                <br></br>
              </p>
              <p class="list-group-item-text">
                <div class="well">{{milestone.description}}</div>
              </p>
              <p>

              </p>
            </a>
          {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>

  </div>
</div>

{% endblock %}
