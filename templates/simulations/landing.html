{% extends "core/base.html" %}

{% block content %}

<h2 class="text-center">Simulation Self-Service</h2>

<br>
<div class="col-md-8 col-md-offset-2 text-center">
  <h3>Execution Nodes</h3>
</div>
</br>

<div class="col-md-8 col-md-offset-2">
  <table class="table">      
    <tr>
      <td><strong>Instance Name</strong></td>
      <td><strong>Type</strong></td>
      <td><strong>State</strong></td>
    </tr>
    {% for instance in instances %}
      <tr>
        <td>{{ instance.instance_name }}</td>
        <td>{{ instance.instance_type }}</td>
        <td>
        {% if instance.instance_state == 'stopped' %}
        <h4><span class="label label-danger">OFFLINE</span></h4>
        {% elif instance.instance_state == 'running' %}
        <h4 class="col-md-offset-5"><span class="label label-success">ONLINE</span></h4>
        {% elif instance.instance_state %}
        <h4 class="col-md-offset-5"><span class="label label-primary">CHANGING</span></h4>  
        {% endif %}
        </td>
      </tr>
    {% endfor %}
  </table>
</div>

<br></br>

<div class="col-md-8 col-md-offset-2">
  <h3 class="text-center">Jobs</h3>
</div>

<br></br>
  
<div class="col-md-8 col-md-offset-2">
  <table class="table">      
    <tr>
        <td><strong>Job ID</strong></td>
        <td><strong>User</strong></td>
        <td><strong>Request Date</strong></td>
        <td><strong>Node Type</strong></td>
        <td><strong>Priority</strong></td>
        <td><strong>Actions</strong></td>
    </tr>
    {% for items in object_list %}
      <tr>
          <td>{{ items.id }}</td>
          <td>{{ items.user.operator.name }}</td>
          <td>{{ items.request_date }}</td>
          <td>{{ items.execution_node }}</td>
          <td>{% if items.priority %}<span class="glyphicon glyphicon-flag"></span>{% endif %}</td>
          <td>
              {% if request.user = items.user %}
              <a class="glyphicon glyphicon-edit" href={% url 'simulation_edit' pk=items.id %}></a>
              <a class="glyphicon glyphicon-remove" href="{% url 'simulation_cancel' pk=items.id %}"></a>
              {% endif %}
          </td>
      </tr>
    {% endfor %}
  </table> 
</div>    

<div class="col-md-8 col-md-offset-2 text-center">
  <a class="btn btn-success pull-right" href="{% url 'create_form' %}">New <span class="glyphicon glyphicon-plus"></span></a>
</div>


{% endblock %}