{% block header %}

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        {% load staticfiles %}
        <link href="{% static 'core/css/bootstrap.min.css' %}" rel="stylesheet">
        <link href="{% static 'core/css/wbg.css' %}" rel="stylesheet">
        <script src="{% static 'core/js/jquery-2.1.0.min.js' %}"></script>
        <script src="{% static 'core/js/bootstrap.min.js' %}"></script>
        {% load bootstrap3 %}


        <title>{% block title %}{% endblock %}</title>

        <!-- HTML5/CSS3 support on older IE -->
        <!--[if lt IE 9]>
            <script src="https://oss.msxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.msxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
        <style>
            .input_area {
                width: 70%;
                margin-left:0;
                text-align: left;
              }
              .output_area {
                width: 70%;
                margin-left:0;
                text-align: left;
              }
              .nb_content {
                float: left;
                width: 70%;
                margin-left:0;
                text-align: left;
              }
              .comment_area {
                float: right;
                width: 30%;
                margin-right:0;
                text-align: left;
                vertical-align: top;
              }
/*              .form-control {
                padding-right: 0px;
              }

              .form-control + .glyphicon {
                position: absolute;
                right: 0;
                padding: 8px 27px;
              }*/
        </style>
        <script type="text/javascript">
            // When your page loads
            $(document).ready(function(){
               // When the toggle areas in your navbar are clicked, toggle them
               $("div[id^='cell_edit_']").hide();
               $("a[id^='edit_button_']").click(function(e){
                   var cellnum = e.target.id.substr(12);
                   var cellname = 'cell_edit_' + cellnum;
                   var formattededitcell = "div[id='" + cellname + "']";
                   var formatteddispcell = "div[id='cell_block_" + cellnum + "']";
                   e.preventDefault();
                   $(formattededitcell).toggle();
                   $(formatteddispcell).toggle();
               });
            })
        </script>
    </head>

{% endblock %}



{% block content %}

{{ form.media }}

<nav class="navbar navbar-default" role="navigation">
    <section class="container-fluid">
        <header class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#wbg-navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="{% url 'home' %}" class="logo navbar-left">
                <img src="{% static 'core/img/logo.png' %}" alt="WBG">
            </a>
        </header>

        <div id="wbg-navbar-collapse" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                {% if not user.is_anonymous %}
                <li>
                    <a class="navbar-link" href="{% url 'dashboard' %}"><span class="glyphicon glyphicon-th-list"></span> Dashboard</a>
                </li>
                {% endif %}
            </ul>

        </div>
    </section>
</nav>


<div>
    <h2 class="col-md-offset-1">Notebooks / {{ user }} / {{ notebook_name }} </h2>
</div>
<br></br>
<div id="nb_content" class="container-fluid">
    <div id="comment_area" class="comment_area">
        <h3><span class="glyphicon glyphicon-comment"></span>&emsp;Comments:</h3>
        <div>
            {% for i in comments %}
                {{ i.comment }}
            {% endfor %}
        </div>
    </div>
    <div class="nb_content">
        <form id="cell_form" action="" method="post">{% csrf_token %}
            {% for i in notebook_content %}
                <a class="btn glyphicon glyphicon-edit edit_{{forloop.counter}}" title="Edit" id="edit_button_{{forloop.counter}}"></a>
                <button class="btn glyphicon glyphicon-repeat" type="submit" title="Update Cell" name="upd_cell_{{forloop.counter}}" value=""></button>
                <div id="cell_block_{{forloop.counter}}">
                    {{ i|safe }}
                </div>

                <div class="{{forloop.counter}}" id="cell_edit_{{ forloop.counter }}">
                    {% for field in form %}
                        {% if forloop.counter = forloop.parentloop.counter %}
                            {% bootstrap_field field %}
                        {% endif %}
                    {% endfor %}
                </div>


            {% endfor %}
        </form>
    </div>

</div>


{% endblock %}
